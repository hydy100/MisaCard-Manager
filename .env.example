# ============================================
# MisaCard 管理系统 - 环境变量配置示例
# ============================================
# 复制此文件为 .env 并填入实际配置值
# 命令: cp .env.example .env

# ============================================
# API 配置（必需 - 二选一）
# ============================================

# 方式一：单 API 模式（简单配置）
# 如果只使用一个 API，配置以下两项即可
MISACARD_API_TOKEN=your_misacard_api_token_here
MISACARD_API_BASE_URL=https://api.misacard.com

# 方式二：多 API 模式（高级配置）
# 配置后公共查询页面会显示 API 选择下拉框，支持多站点切换
# 注意：配置此项后，上面的 MISACARD_API_TOKEN 将被忽略
# 格式：JSON 数组，每个对象包含 name（显示名称）、base_url（API 地址）、token（访问令牌）
# MISACARD_API_CONFIGS='[{"name":"主站","base_url":"https://api.misacard.com","token":"your_token_1"},{"name":"备用站","base_url":"https://api2.example.com","token":"your_token_2"}]'

# ============================================
# 安全配置（必需）
# ============================================

# 管理员登录密码（建议使用强密码，至少 12 位，包含大小写字母、数字和特殊字符）
ADMIN_PASSWORD=your_strong_admin_password_here

# Session 加密密钥（用于加密用户会话）
# 生成方法: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your_secret_key_here_generate_with_command_above

# ============================================
# 可选配置
# ============================================

# 数据库连接 URL（默认使用 SQLite）
# DATABASE_URL=sqlite:///./data/cards.db

# 调试模式（生产环境请设置为 false）
DEBUG=true

# Session 过期时间（秒，默认 86400 = 24小时）
SESSION_MAX_AGE=86400

# ============================================
# 配置说明
# ============================================

# 1. API 配置说明：
#    - 单 API 模式：适合只使用一个 API 站点的情况
#    - 多 API 模式：适合需要在多个 API 站点之间切换的情况
#      * 管理后台会使用第一个配置的 API
#      * 公共查询页面会显示下拉框供用户选择

# 2. 安全建议：
#    - 生产环境务必修改默认密码
#    - SECRET_KEY 必须使用随机生成的强密钥
#    - DEBUG 在生产环境必须设置为 false
#    - 建议配置 HTTPS 和防火墙

# 3. 文件权限：
#    chmod 600 .env
#    chmod 700 data/
#    chmod 600 data/cards.db

# 4. Docker 部署：
#    - 本文件会被自动加载
#    - 确保 data 目录权限正确: chown -R 1000:1000 data

# ============================================
# 完整配置示例
# ============================================

# 示例一：单 API 配置
# MISACARD_API_TOKEN=sk_live_abc123def456ghi789jkl
# MISACARD_API_BASE_URL=https://api.misacard.com
# ADMIN_PASSWORD=MyStr0ng!Passw0rd#2024
# SECRET_KEY=kJ8x_aBc9pQr2LmN7vFg4wEd1sZh6yTj3uOi5nKl0
# DEBUG=false

# 示例二：多 API 配置
# MISACARD_API_CONFIGS='[{"name":"主站","base_url":"https://api.misacard.com","token":"sk_live_main_token"},{"name":"备用站","base_url":"https://backup.misacard.com","token":"sk_live_backup_token"},{"name":"测试站","base_url":"https://test.misacard.com","token":"sk_test_token"}]'
# ADMIN_PASSWORD=MyStr0ng!Passw0rd#2024
# SECRET_KEY=kJ8x_aBc9pQr2LmN7vFg4wEd1sZh6yTj3uOi5nKl0
# DEBUG=false
